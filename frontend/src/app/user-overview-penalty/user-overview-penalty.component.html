<div class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display': displayThis}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="penaltiesLabel" translate>management.managePenalties</h5>
      </div>
      <div class="modal-body">
        <div class="row">

          <table class="table-striped" style="width: 100%" id="penaltiesTable" *ngIf="penalties !== undefined && penalties.length > 0">
            <thead class="bg-info">
              <tr class="firstrow lastrow even">
                <th scope="col" translate>management.eventCode</th>
                <th scope="col" translate>management.timestamp</th>
                <th scope="col" translate>management.forDate</th>
                <th scope="col" translate>management.at</th>
                <th scope="col" translate>management.receivedPoints</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              <tr [@rowsAnimation]="" *ngFor="let penalty of penalties" class="row_odd firstrow odd">
                <td>{{penalty.eventCode}}</td>
                <td>{{penalty.timestamp.day | number: '2.0-0'}}-{{penalty.timestamp.month | number: '2.0-0'}}-{{penalty.timestamp.year}} {{penalty.timestamp.hrs | number: '2.0-0'}}:{{penalty.timestamp.min | number: '2.0-0'}}:{{penalty.timestamp.sec | number: '2.0-0'}}</td>
                <td>{{penalty.reservationDate.day | number: '2.0-0'}}-{{penalty.reservationDate.month | number: '2.0-0'}}-{{penalty.reservationDate.year}} {{penalty.reservationDate.hrs | number: '2.0-0'}}:{{penalty.reservationDate.min | number: '2.0-0'}}:{{penalty.reservationDate.sec | number: '2.0-0'}}</td>
                <td>{{penalty.reservationLocation}}</td>
                <td *ngIf="penalty.receivedPoints >= 0 else lookUpInTable">{{penalty.receivedPoints}}</td>
                <ng-template #lookUpInTable>
                  <td>{{cacheForPoints.get(penalty.eventCode)}}</td>
                </ng-template>
                <td style="padding-left: 10px; padding-right: 10px; padding-top: 10px"><span (click)="displayDelete = 'block'; selectedPenalty = penalty" class="glyphicon glyphicon-trash pointerCursor"></span></td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="penalties === undefined || penalties.length === 0" translate [translateParams]="{augentID: this.augentID}">
            management.noPenaltiesForUser
          </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn align-left" (click)="displayThis = 'none'; displayAdd.next('block')" translate>
          management.addPenalty
        </button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal" data-toggle="modal"
                data-target="#profiel" (click)="cancelPenaltyChanges()" translate>
          location.cancel
        </button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal" translate data-toggle="modal"
                data-target="#profiel" (click)="persistPenaltyChanges()">
          admin.change
        </button>
      </div>
    </div>
  </div>
</div>

<!-- pop-up which is shown when an employee tries to delete a penalty from a user -->
<div *ngIf="selectedPenalty !== undefined" class="modal" tabindex="-1" role="dialog"  [ngStyle]="{'display':displayDelete}">
  <div class="modal-dialog" role="document">
    <div class="modal-content">

      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="displayDelete='none';"><span aria-hidden="true">&times;</span></button>
        <h2 class="modal-title" translate > Delete? </h2>
      </div>

      <div class="modal-body">
        <div [translateParams]="{points: selectedPenalty.receivedPoints}"  translate>
          management.deletePenalty
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="displayDelete='none'" translate>
          management.no
        </button>
        <button type="button" class="btn btn-secondary"  (click)="deletePenalty(this.selectedPenalty); displayDelete='none'" translate>
          management.yes
        </button>
      </div>

    </div>
  </div>
</div>

<!--
  Pop-up for adding a new Penalty to the user with id = this.augentID
-->
<app-user-overview-penalty-add [augentID]="augentID" [display]="displayAdd" (newPenaltyEvent)="displayThis = 'block'; addNewPenalty($event)"></app-user-overview-penalty-add>
